<!DOCTYPE html>
<html>
<head>
  <title>Flamingo</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <h1 id="title">ðŸ¦© Flamingo</h1>

  <!-- Shared scoreboard container -->
  <div id="scoreboard-container"></div>

  <button id="eat" class="btn">Eat Shrimp (+1 Energy)</button>

  <script type="module">
    import { connect, sendEvent } from './js/client.js';
    import { createScoreboard, updateScoreboard } from './js/scoreboard.js';

    const team = new URLSearchParams(window.location.search).get('team') || 'red';

    const title = document.getElementById('title');
    const button = document.getElementById('eat');

    // Apply team styles
    title.classList.add(`team-${team}`);
    button.classList.add(`btn-${team}`);
    title.textContent = `ðŸ¦© ${team.toUpperCase()} Flamingo`;

    // Create scoreboard table
    createScoreboard();

    // Connect to WebSocket
    connect((state) => {
      updateScoreboard(state);
    });

    // Team-scoped action
    button.addEventListener('click', () => {
      sendEvent('INCREMENT_ENERGY', { team, amount: 1 });
      sendEvent('INCREMENT_SHRIMP', { team, amount: -1 });
    });
  </script>
</body>
</html>
